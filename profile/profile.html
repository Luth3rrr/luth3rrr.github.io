<!DOCTYPE html>
<html>
  <head>
    <title>Create Profile</title>
            <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
    <script <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDGhoxtcdUjczXJSbcGuWOxiMmTlNmmYbo",
        authDomain: "mugi-89580.firebaseapp.com",
        projectId: "mugi-89580",
        storageBucket: "mugi-89580.appspot.com",
        messagingSenderId: "879625806245",
        appId: "1:879625806245:web:375e806b82d0e6540b084c",
        measurementId: "G-CM8V0CYQ85",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();

      // Check if the user is signed in
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          // User is signed in, redirect to profile creation or display existing profile
          database
            .ref("profiles/" + user.uid)
            .once("value")
            .then(function (snapshot) {
              if (snapshot.exists()) {
                // Profile already exists, display the profile
                var profile = snapshot.val();
                displayProfile(profile);
              } else {
                // Profile doesn't exist, redirect to profile creation page
                window.location.href = "create-profile.html";
              }
            })
            .catch(function (error) {
              // Handle errors here
            });
        } else {
          // User is not signed in, redirect to sign-in page
          window.location.href = "/signin.html";
        }
      });

      function displayProfile(profile) {
        // Display the profile details on the page
        var profileElement = document.getElementById("profile");
        profileElement.textContent = "Profile Name: " + profile.name;
      }
    </script>
  </head>
  <body>
    <h1>Profile Page</h1>
    <div id="profile"></div>
  </body>
</html>
